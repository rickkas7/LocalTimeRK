<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LocalTimeRK: LocalTimeRK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LocalTimeRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">LocalTimeRK </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> <em>Timezone and DST handling for Particle devices</em></p>
<p >This library is designed for specific local time and daylight saving time scenarios on Particle devices. It is not intended to solve all problems in all situations, however it will work well in certain scenarios:</p>
<ul>
<li><a href="https://rickkas7.github.io/LocalTimeRK/">Full API docs</a></li>
<li>Github repository: <a href="https://github.com/rickkas7/LocalTimeRK/">https://github.com/rickkas7/LocalTimeRK/</a></li>
<li>License: MIT</li>
</ul>
<p ><b>What it's good for:</b></p>
<ul>
<li>Managing local time, and daylight saving time, if needed, on devices in a known location</li>
<li>Mostly intended for devices in your own home</li>
<li>Managing scheduling of tasks at a specific local time</li>
<li>Displaying local time</li>
</ul>
<p ><b>What it's not intended for:</b></p>
<ul>
<li>Mobile devices that may change locations</li>
<li>Customer devices that could be in any timezone</li>
</ul>
<h1>Features</h1>
<ul>
<li>Timezone configuration using a POSIX timezone rule string</li>
<li>Does not require network access to determine timezone and daylight saving transitions</li>
<li>Good for displaying local time, such as on clock-like devices</li>
<li>Good for scheduling operations at a specific local time. For example, every day at 8:00 AM regardless of timezone and DST</li>
<li>Support for locations with DST and without DST (timezone only)</li>
<li>Should work in the southern hemisphere were DST is opposite on the calendar</li>
<li>Should work in any country as long as a compatible POSIX timezone configuration string can be generated</li>
</ul>
<h1>What is a POSIX timezone configuration?</h1>
<p >For the United States east coast, the configuration string is:</p>
<div class="fragment"><div class="line">EST5EDT,M3.2.0/2:00:00,M11.1.0/2:00:00&quot;</div>
</div><!-- fragment --><p >What this means is:</p>
<ul>
<li>"EST" is the standard time timezone name</li>
<li>5 is the offset from UTC in hours. Actually -5, as the sign is backwards from the way it's normally expressed. And it could be hours and minutes.</li>
<li>"EDT" is the daylight saving time timezone name</li>
<li>"M3.2.0" is when DST starts. Month 3 (March), 2nd week, 0 = Sunday</li>
<li>"2:00:00" transition to DST at 2:00 AM local time</li>
<li>"M11.1.0" transition back to standard time November, 1st week, on Sunday</li>
<li>"2:00:00" transition back to standard time at 2:00 AM local time</li>
</ul>
<p >There are a bunch of supported formats, including for locations that don't have DST (such as Arizona, "MST7") and southern hemisphere where daylight saving is on the opposite part of the year, such as Eastern Australian time used in Sydney, Australia "AEST-10AEDT,M10.1.0/02:00:00,M4.1.0/03:00:00".</p>
<h1>Using for scheduling</h1>
<p >This library does not modify the <code>Time</code> class timezone! This has the potential to disrupt all sorts of things that depend on <code>Time</code>, and should be avoided. A new class and methods provide access to local time when needed.</p>
<p >Additionally, it's designed to handle scheduling. For example, say you want to perform an operation at 3:00 AM every day, local time. The class can find the UTC time corresponding to this, taking into account timezones and DST changes. Using <code>Time.now()</code> comparisons (at UTC) is fast and efficient. It's also good when you want to store the desired time in EEPROM, retained memory, or the file system.</p>
<p >The library also handles weird transition scenarios that occur on spring forward (in the north hemisphere) where the hour from 2:00 AM local time to 2:59:59 doesn't exist, and in the fall back where the hour from 1:00:00 to 1:59:59 local time occurs twice.</p>
<p >It also handles other common scheduling scenarios:</p>
<ul>
<li>Tomorrow (same time)</li>
<li>Tomorrow (at a specific local time)</li>
<li>On a specific day of week at a specific time ("every Saturday at 3:00 AM")</li>
<li>On a day of week with an ordinal ("on the 2nd Saturday of the month")</li>
<li>On a specific day of month at a specific time</li>
<li>Also the last day of the month, the second to last day of the month, ...</li>
<li>On the next weekday (Monday - Friday)</li>
<li>On the next weekend day (Saturday - Sunday)</li>
</ul>
<h1>Clock Example</h1>
<p >There is an example of using the library to use an Adafruit FeatherWing OLED Display 128x32 as a clock.</p>
<p >The display is available at <a href="https://www.adafruit.com/product/2900">Adafruit</a>. You can find more technical information <a href="https://learn.adafruit.com/adafruit-oled-featherwing/overview">at Adafruit</a>. The library is available in the Web IDE as <a href="https://build.particle.io/libs/oled-wing-adafruit/0.0.4/tab/oled-wing-adafruit.cpp">oled-wing-adafruit</a>. You can find additional documentation <a href="https://github.com/rickkas7/oled-wing-adafruit">here</a>.</p>
<p >The code example is in the more-examples directory in the Clock directory and is quite simple:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Particle.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;LocalTimeRK.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;oled-wing-adafruit.h&quot;</span></div>
<div class="line"> </div>
<div class="line">SerialLogHandler logHandler;</div>
<div class="line"> </div>
<div class="line">SYSTEM_THREAD(ENABLED);</div>
<div class="line"> </div>
<div class="line">OledWingAdafruit display;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    <span class="comment">// Set timezone to the Eastern United States</span></div>
<div class="line">    <a class="code hl_function" href="class_local_time.html#a37be620abc0478abb5379c02e00470b1">LocalTime::instance</a>().<a class="code hl_function" href="class_local_time.html#a5275a624cca0a3e0417a8b93bb90e44d">withConfig</a>(<a class="code hl_class" href="class_local_time_posix_timezone.html">LocalTimePosixTimezone</a>(<span class="stringliteral">&quot;EST5EDT,M3.2.0/2:00:00,M11.1.0/2:00:00&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    display.setup();</div>
<div class="line"> </div>
<div class="line">    display.clearDisplay();</div>
<div class="line">    display.display();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lastUpdate = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (millis() - lastUpdate &gt;= 1000 &amp;&amp; Time.isValid()) {</div>
<div class="line">        lastUpdate = millis();</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_class" href="class_local_time_convert.html">LocalTimeConvert</a> conv;</div>
<div class="line">        conv.<a class="code hl_function" href="class_local_time_convert.html#a1e23a4640eaf0d6ecae049c5e97dd1f2">withCurrentTime</a>().<a class="code hl_function" href="class_local_time_convert.html#ab0ca70e6cdb54dbb2a81ae283250fdb8">convert</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Log.info(&quot;local time: %s&quot;, conv.format(TIME_FORMAT_ISO8601_FULL).c_str());</span></div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Room for 11 characters at text size 2</span></div>
<div class="line">        display.clearDisplay();</div>
<div class="line">        display.setTextColor(WHITE);</div>
<div class="line">        display.setTextSize(2);</div>
<div class="line">        display.setFont(NULL);</div>
<div class="line">        display.setCursor(0, 1);</div>
<div class="line"> </div>
<div class="line">        String msg;</div>
<div class="line"> </div>
<div class="line">        msg = conv.<a class="code hl_function" href="class_local_time_convert.html#a5a2f655ab7976cba45e68c6789f4a865">format</a>(<span class="stringliteral">&quot;%Y-%m-%d&quot;</span>); <span class="comment">// 2021-06-07</span></div>
<div class="line">        display.println(msg);</div>
<div class="line"> </div>
<div class="line">        msg = conv.<a class="code hl_function" href="class_local_time_convert.html#a5a2f655ab7976cba45e68c6789f4a865">format</a>(<span class="stringliteral">&quot;%I:%M:%S%p&quot;</span>); <span class="comment">// 10:00:00AM</span></div>
<div class="line">        display.println(msg);</div>
<div class="line"> </div>
<div class="line">        display.display();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_local_time_convert_html"><div class="ttname"><a href="class_local_time_convert.html">LocalTimeConvert</a></div><div class="ttdoc">Perform time conversions. This is the main class you will need.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:1807</div></div>
<div class="ttc" id="aclass_local_time_convert_html_a1e23a4640eaf0d6ecae049c5e97dd1f2"><div class="ttname"><a href="class_local_time_convert.html#a1e23a4640eaf0d6ecae049c5e97dd1f2">LocalTimeConvert::withCurrentTime</a></div><div class="ttdeci">LocalTimeConvert &amp; withCurrentTime()</div><div class="ttdoc">Use the current time as the time to start with.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:1850</div></div>
<div class="ttc" id="aclass_local_time_convert_html_a5a2f655ab7976cba45e68c6789f4a865"><div class="ttname"><a href="class_local_time_convert.html#a5a2f655ab7976cba45e68c6789f4a865">LocalTimeConvert::format</a></div><div class="ttdeci">String format(const char *formatSpec)</div><div class="ttdoc">Works like Time.format()</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.cpp:1348</div></div>
<div class="ttc" id="aclass_local_time_convert_html_ab0ca70e6cdb54dbb2a81ae283250fdb8"><div class="ttname"><a href="class_local_time_convert.html#ab0ca70e6cdb54dbb2a81ae283250fdb8">LocalTimeConvert::convert</a></div><div class="ttdeci">void convert()</div><div class="ttdoc">Do the time conversion.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.cpp:1104</div></div>
<div class="ttc" id="aclass_local_time_html_a37be620abc0478abb5379c02e00470b1"><div class="ttname"><a href="class_local_time.html#a37be620abc0478abb5379c02e00470b1">LocalTime::instance</a></div><div class="ttdeci">static LocalTime &amp; instance()</div><div class="ttdoc">Get the global singleton instance of this class.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.cpp:1421</div></div>
<div class="ttc" id="aclass_local_time_html_a5275a624cca0a3e0417a8b93bb90e44d"><div class="ttname"><a href="class_local_time.html#a5275a624cca0a3e0417a8b93bb90e44d">LocalTime::withConfig</a></div><div class="ttdeci">LocalTime &amp; withConfig(LocalTimePosixTimezone config)</div><div class="ttdoc">Sets the default global timezone configuration.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:2243</div></div>
<div class="ttc" id="aclass_local_time_posix_timezone_html"><div class="ttname"><a href="class_local_time_posix_timezone.html">LocalTimePosixTimezone</a></div><div class="ttdoc">Parses a Posix timezone string into its component parts.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:1027</div></div>
</div><!-- fragment --><p ><img src="clock.png" alt="" class="inline"/></p>
<h1>Using the library</h1>
<h2>Configure the timezone</h2>
<ul>
<li>Determine the POSIX timezone string for your location. For example, the US eastern timezone is shown in the example</li>
<li>At setup, configure the timezone:</li>
</ul>
<div class="fragment"><div class="line"><a class="code hl_function" href="class_local_time.html#a37be620abc0478abb5379c02e00470b1">LocalTime::instance</a>().<a class="code hl_function" href="class_local_time.html#a5275a624cca0a3e0417a8b93bb90e44d">withConfig</a>(<a class="code hl_class" href="class_local_time_posix_timezone.html">LocalTimePosixTimezone</a>(<span class="stringliteral">&quot;EST5EDT,M3.2.0/2:00:00,M11.1.0/2:00:00&quot;</span>));</div>
</div><!-- fragment --><p >Some configuration strings:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Location   </th><th class="markdownTableHeadLeft">Timezone Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">New York   </td><td class="markdownTableBodyLeft">"EST5EDT,M3.2.0/02:00:00,M11.1.0/02:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Chicago   </td><td class="markdownTableBodyLeft">"CST6CDT,M3.2.0/2:00:00,M11.1.0/2:00:00"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Denver   </td><td class="markdownTableBodyLeft">"MST7MDT,M3.2.0/2:00:00,M11.1.0/2:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Phoenix   </td><td class="markdownTableBodyLeft">"MST7"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Los Angeles   </td><td class="markdownTableBodyLeft">"PST8PDT,M3.2.0/2:00:00,M11.1.0/2:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">London   </td><td class="markdownTableBodyLeft">"BST0GMT,M3.5.0/1:00:00,M10.5.0/2:00:00"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Sydney, Australia   </td><td class="markdownTableBodyLeft">"AEST-10AEDT,M10.1.0/02:00:00,M4.1.0/03:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Adelaide, Australia   </td><td class="markdownTableBodyLeft">"ACST-9:30ACDT,M10.1.0/02:00:00,M4.1.0/03:00:00"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">UTC   </td><td class="markdownTableBodyLeft">"UTC"   </td></tr>
</table>
<h2>Getting the current local time</h2>
<p >Use the <code><a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a></code> class like this to get the current time:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_local_time_convert.html">LocalTimeConvert</a> conv;</div>
<div class="line">conv.<a class="code hl_function" href="class_local_time_convert.html#a1e23a4640eaf0d6ecae049c5e97dd1f2">withCurrentTime</a>().<a class="code hl_function" href="class_local_time_convert.html#ab0ca70e6cdb54dbb2a81ae283250fdb8">convert</a>();</div>
</div><!-- fragment --><p >This will initialize the <code>conv</code> object with information about the current local time in the timezone you have configured.</p>
<p >Additional useful <a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a> methods:</p>
<p >&lt;details&gt;</p>
<h3>bool <a class="el" href="class_local_time_convert.html#ad831b90ec679c969f785c46544297c80" title="Returns true if the current time is in daylight saving time.">LocalTimeConvert::isDST() const</a></h3>
<p >Returns true if the current time is in daylight saving time.</p>
<div class="fragment"><div class="line">bool isDST() const</div>
</div><!-- fragment --><hr  />
<h3>bool <a class="el" href="class_local_time_convert.html#a7bdf2c3014396b47588130a6f7ef600a" title="Returns true of the current time in in standard time.">LocalTimeConvert::isStandardTime() const</a></h3>
<p >Returns true of the current time in in standard time.</p>
<div class="fragment"><div class="line">bool isStandardTime() const</div>
</div><!-- fragment --><hr  />
<h3>String <a class="el" href="class_local_time_convert.html#a5a16bd3ae86b62eae075e069c6ec3e33" title="Works like Time.timeStr() to generate a readable string of the local time.">LocalTimeConvert::timeStr()</a></h3>
<p >Works like Time.timeStr() to generate a readable string of the local time.</p>
<div class="fragment"><div class="line">String timeStr()</div>
</div><!-- fragment --><p >Uses asctime formatting, which looks like "Fri Jan  1 18:45:56 2021". The strings are not localized; they're always in English.</p>
<hr  />
<h3>String <a class="el" href="class_local_time_convert.html#a5a2f655ab7976cba45e68c6789f4a865" title="Works like Time.format()">LocalTimeConvert::format(const char * formatSpec)</a></h3>
<p >Works like Time.format()</p>
<div class="fragment"><div class="line">String format(const char * formatSpec)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>formatSpec</code> the format specifies, which can be</li>
<li>TIME_FORMAT_DEFAULT (example: "Thu Apr  1 12:00:00 2021")</li>
<li>TIME_FORMAT_ISO8601_FULL (example: "2021-04-01T12:00:00-04:00")</li>
<li>custom format based on strftime()</li>
</ul>
<p >There are many options to strftime described here: <a href="https://www.cplusplus.com/reference/ctime/strftime/?kw=strftime">https://www.cplusplus.com/reference/ctime/strftime/?kw=strftime</a></p>
<p >Unlike Time.format(), you can use Z to output the timezone abbreviation, for example "EDT" for the Eastern United States, daylight saving instead of -04:00.</p>
<p >The z formatting matches that of Time.format(), which is wrong. The correct output should be "-400" but the output will be "-04:00" for compatibility.</p>
<p >If you want to make a US-style AM/PM clock display, the formatting string "%I:%M %p" will produce something like "12:30 PM".</p>
<hr  />
<h3>String <a class="el" href="class_local_time_convert.html#ae490f71a01897a7c37ba85926b683a5b" title="Returns the abbreviated time zone name for the current time.">LocalTimeConvert::zoneName() const</a></h3>
<p >Returns the abbreviated time zone name for the current time.</p>
<div class="fragment"><div class="line">String zoneName() const</div>
</div><!-- fragment --><p >For example, for the United States east coast, EST or EDT depending on whether the current time is DST or not. See also isDST().</p>
<p >This string comes from the <a class="el" href="class_local_time_posix_timezone.html" title="Parses a Posix timezone string into its component parts.">LocalTimePosixTimezone</a> object.</p>
<h2>Converting UTC to local time</h2>
<p >Use the <code><a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a></code> class like this to get the current time:</p>
<div class="fragment"><div class="line">time_t timeVal = 1612393852; <span class="comment">// Wednesday, February 3, 2021 11:10:52 PM</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="class_local_time_convert.html">LocalTimeConvert</a> conv;</div>
<div class="line">conv.<a class="code hl_function" href="class_local_time_convert.html#a9674e17e4c260f2d5093436e84e1553b">withTime</a>(timeVal).<a class="code hl_function" href="class_local_time_convert.html#ab0ca70e6cdb54dbb2a81ae283250fdb8">convert</a>();</div>
<div class="ttc" id="aclass_local_time_convert_html_a9674e17e4c260f2d5093436e84e1553b"><div class="ttname"><a href="class_local_time_convert.html#a9674e17e4c260f2d5093436e84e1553b">LocalTimeConvert::withTime</a></div><div class="ttdeci">LocalTimeConvert &amp; withTime(time_t time)</div><div class="ttdoc">Sets the UTC time to begin conversion from.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:1842</div></div>
</div><!-- fragment --><p >&lt;/details&gt;</p>
<h1>Advanced scheduling</h1>
<p >An advanced scheduling mode was added in version 0.0.8. This allows complex schedules such as:</p>
<ul>
<li>Every 15 minutes in the hour, between 9:00 AM and 5:00 PM local time, Monday - Friday, except on 2022-03-21</li>
<li>Every 4 hours of the day starting at 00:00:00 (midnight) other times</li>
</ul>
<p >This can either be specified in code, or it can be expressed in JSON. JSON allows the schedule to be updating using a Particle.function, for example.</p>
<p >This is a compact representation of that schedule in 77 bytes of JSON data:</p>
<div class="fragment"><div class="line">[{&quot;mh&quot;:15,&quot;y&quot;:62,&quot;s&quot;:&quot;09:00:00&quot;,&quot;e&quot;:&quot;16:59:59&quot;,&quot;x&quot;:[&quot;2022-03-21&quot;]},{&quot;hd&quot;:4}]</div>
</div><!-- fragment --><p >While scheduling is designed to work with local time, each schedule calculator can optionally have a time zone override, which makes it possible to do some calculations at UTC if you prefer to do that.</p>
<h2>Using a schedule</h2>
<p >This is the code in examples/2-schedule:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;LocalTimeRK.h&quot;</span></div>
<div class="line"> </div>
<div class="line">SerialLogHandler logHandler;</div>
<div class="line">SYSTEM_THREAD(ENABLED);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="class_local_time_schedule.html">LocalTimeSchedule</a> publishSchedule;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    <span class="comment">// Set timezone to the Eastern United States</span></div>
<div class="line">    <a class="code hl_function" href="class_local_time.html#a37be620abc0478abb5379c02e00470b1">LocalTime::instance</a>().<a class="code hl_function" href="class_local_time.html#a5275a624cca0a3e0417a8b93bb90e44d">withConfig</a>(<a class="code hl_class" href="class_local_time_posix_timezone.html">LocalTimePosixTimezone</a>(<span class="stringliteral">&quot;EST5EDT,M3.2.0/2:00:00,M11.1.0/2:00:00&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Publish every 5 minutes at :00, :05, :10, ...</span></div>
<div class="line">    publishSchedule.<a class="code hl_function" href="class_local_time_schedule.html#a0f3e02eb918ae5b0a583c9d589fdb211">withMinuteOfHour</a>(5);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">    <span class="keywordflow">if</span> (publishSchedule.<a class="code hl_function" href="class_local_time_schedule.html#a0547cb821fd74d60c9911d8ddd5b1a0f">isScheduledTime</a>() &amp;&amp; Particle.connected()) {</div>
<div class="line">        Particle.publish(<span class="stringliteral">&quot;testEvent&quot;</span>, <span class="stringliteral">&quot;scheduled publish!&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_local_time_schedule_html"><div class="ttname"><a href="class_local_time_schedule.html">LocalTimeSchedule</a></div><div class="ttdoc">A complete time schedule.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:1503</div></div>
<div class="ttc" id="aclass_local_time_schedule_html_a0547cb821fd74d60c9911d8ddd5b1a0f"><div class="ttname"><a href="class_local_time_schedule.html#a0547cb821fd74d60c9911d8ddd5b1a0f">LocalTimeSchedule::isScheduledTime</a></div><div class="ttdeci">bool isScheduledTime()</div><div class="ttdoc">Determine if it's time to run the scheduled task based on the current time and internal nextTime memb...</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.cpp:938</div></div>
<div class="ttc" id="aclass_local_time_schedule_html_a0f3e02eb918ae5b0a583c9d589fdb211"><div class="ttname"><a href="class_local_time_schedule.html#a0f3e02eb918ae5b0a583c9d589fdb211">LocalTimeSchedule::withMinuteOfHour</a></div><div class="ttdeci">LocalTimeSchedule &amp; withMinuteOfHour(int increment, LocalTimeRange timeRange=LocalTimeRange())</div><div class="ttdoc">Adds a minute multiple schedule in a time range.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.cpp:830</div></div>
</div><!-- fragment --><p >This is a simple example that publishes at :00, :05, :10, .... Note that these are clock times, not rolling times.</p>
<p >Technically you don't need a timezone for this example since it doesn't do any hour-based calculations, but it's set using <code>withConfig()</code> when you need to use one.</p>
<p >The part in loop() tests to see if it's time to publish and then publishes. As shown in the example, if you are not connected to the cloud at the scheduled time, that scheduled time is skipped.</p>
<p >If you reverse the order in the if statement, then if you are not connected to the cloud, it's possible to get publish immediately after reconnecting to the cloud to make up for the one that was missed.</p>
<div class="fragment"><div class="line"><span class="comment">// Allow one out-of-schedule publish to catch up for a missed publish in this order</span></div>
<div class="line"><span class="keywordflow">if</span> (Particle.connected() &amp;&amp; publishSchedule.<a class="code hl_function" href="class_local_time_schedule.html#a0547cb821fd74d60c9911d8ddd5b1a0f">isScheduledTime</a>())</div>
</div><!-- fragment --><p >The real benefit is when you start to make more complex schedules, such as:</p>
<div class="fragment"><div class="line"><span class="comment">// Every 15 minutes between 9:00 AM and 5:00 PM local time Monday - Friday</span></div>
<div class="line">publishSchedule.<a class="code hl_function" href="class_local_time_schedule.html#a0f3e02eb918ae5b0a583c9d589fdb211">withMinuteOfHour</a>(15, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;09:00:00&quot;</span>), <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;16:59:59&quot;</span>), <a class="code hl_class" href="class_local_time_restricted_date.html">LocalTimeRestrictedDate</a>(<a class="code hl_variable" href="class_local_time_day_of_week.html#af61f2d3564336024fd93d174c09ab225">LocalTimeDayOfWeek::MASK_WEEKDAY</a>)));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Every hour otherwise</span></div>
<div class="line">publishSchedule.<a class="code hl_function" href="class_local_time_schedule.html#a0f3e02eb918ae5b0a583c9d589fdb211">withMinuteOfHour</a>(60);</div>
<div class="ttc" id="aclass_local_time_day_of_week_html_af61f2d3564336024fd93d174c09ab225"><div class="ttname"><a href="class_local_time_day_of_week.html#af61f2d3564336024fd93d174c09ab225">LocalTimeDayOfWeek::MASK_WEEKDAY</a></div><div class="ttdeci">static const uint8_t MASK_WEEKDAY</div><div class="ttdoc">Mask value for weekdays Monday - Friday 0x3e = 62.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:413</div></div>
<div class="ttc" id="aclass_local_time_h_m_s_html"><div class="ttname"><a href="class_local_time_h_m_s.html">LocalTimeHMS</a></div><div class="ttdoc">Container for holding an hour minute second time value.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:422</div></div>
<div class="ttc" id="aclass_local_time_range_html"><div class="ttname"><a href="class_local_time_range.html">LocalTimeRange</a></div><div class="ttdoc">Class to hold a time range in local time in HH:MM:SS format.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:1222</div></div>
<div class="ttc" id="aclass_local_time_restricted_date_html"><div class="ttname"><a href="class_local_time_restricted_date.html">LocalTimeRestrictedDate</a></div><div class="ttdoc">Day of week, date, or date exception restrictions.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:690</div></div>
</div><!-- fragment --><p >You can exclude dates from a schedule. For example, the every 15 minutes on weekdays schedule excludes Monday, April 11, 2022 with this schedule:</p>
<div class="fragment"><div class="line">publishSchedule.<a class="code hl_function" href="class_local_time_schedule.html#a0f3e02eb918ae5b0a583c9d589fdb211">withMinuteOfHour</a>(15, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;09:00:00&quot;</span>), <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;16:59:59&quot;</span>), </div>
<div class="line">    <a class="code hl_class" href="class_local_time_restricted_date.html">LocalTimeRestrictedDate</a>(<a class="code hl_variable" href="class_local_time_day_of_week.html#af61f2d3564336024fd93d174c09ab225">LocalTimeDayOfWeek::MASK_WEEKDAY</a>, {}, {<span class="stringliteral">&quot;2022-04-11&quot;</span>})));</div>
<div class="line">publishSchedule.<a class="code hl_function" href="class_local_time_schedule.html#a0f3e02eb918ae5b0a583c9d589fdb211">withMinuteOfHour</a>(60);</div>
</div><!-- fragment --><h2><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> items</h2>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> include things like every n minutes, every n hours, as well as day of week and day of month multiples. Each multiple has a type, an increment, in some cases additional data, and a <code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> that determines when the multiple is used.</p>
<p ><code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> is itself composed of a <code>TimeRange</code>, and a <code><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a></code>. This specifies both the time of day, as well as an optional restriction on the dates it applies. See above for for an explanation of these types.</p>
<h3>Minute of hour</h3>
<p >This schedule item is used for "every n minutes." For example, if you want to publish an event every 15 minutes.</p>
<div class="fragment"><div class="line"><span class="comment">// PROTOTYPE (class LocalTimeSchedule)</span></div>
<div class="line"><a class="code hl_class" href="class_local_time_schedule.html">LocalTimeSchedule</a> &amp;withMinuteOfHour(<span class="keywordtype">int</span> increment, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a> timeRange = <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>());</div>
</div><!-- fragment --><ul>
<li>Minute multiples are relative to the hour, so you typically want to use an increment that 60 is evenly divisible by in order to keep the period constant (2, 3, 4, 5, 6, 10, 12, 15, 20, 30).</li>
<li>The <code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> can restrict this to certain hours of the day, and certain days of the week. It can also handle exception dates, both only on date, or to exclude dates.</li>
<li>The minute of the start of the time range specifies the offset relative to the hour to start the increment from (modulo the increment).</li>
<li>The second of the start of the time range specifies the second offset.</li>
</ul>
<p >For example, every 15 minutes all day, at 05:00, 20:00, 35:00, 50:00:</p>
<div class="fragment"><div class="line">schedule.withMinuteOfHour(15, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;00:05:00&quot;</span>)));</div>
</div><!-- fragment --><p >Every 5 minutes from 9:00 AM to 5:00 PM local time every day:</p>
<div class="fragment"><div class="line">schedule.withMinuteOfHour(5, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;09:00:00&quot;</span>), <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;16:59:59&quot;</span>)))</div>
</div><!-- fragment --><p >Every 5 minutes from 9:00 AM to 5:00 PM local time on weekdays (not Saturday or Sunday):</p>
<div class="fragment"><div class="line">schedule.withMinuteOfHour(5, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;09:00:00&quot;</span>), <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;16:59:59&quot;</span>), <a class="code hl_class" href="class_local_time_restricted_date.html">LocalTimeRestrictedDate</a>(<a class="code hl_variable" href="class_local_time_day_of_week.html#af61f2d3564336024fd93d174c09ab225">LocalTimeDayOfWeek::MASK_WEEKDAY</a>)));</div>
</div><!-- fragment --><p >In generating from JSON:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Key   </th><th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadLeft">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"mh"   </td><td class="markdownTableBodyLeft">integer   </td><td class="markdownTableBodyLeft">Minute of hour multiple   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">"f"   </td><td class="markdownTableBodyLeft">integer   </td><td class="markdownTableBodyLeft">Flag bits (optional)   </td><td class="markdownTableBodyLeft">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"s"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">The start time (HH:MM:SS format, can omit MM or SS)   </td><td class="markdownTableBodyLeft">"00:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">"e"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">The end time (HH:MM:SS format, can omit MM or SS)   </td><td class="markdownTableBodyLeft">"23:59:59"   </td></tr>
</table>
<p>| "y" | integer | Mask value for days of the week (optional) | | "a" | Array of string | Array of strings of the form YYYY-MM-DD to allow specific dates (optional) | | "x" | Array of string | Array of strings of the form YYYY-MM-DD to exclude specific dates (optional) |</p>
<h3>Hour of day multiples</h3>
<p >This schedule is used for "every n hours." For example, if you want to wake and publish every 4 hours.</p>
<div class="fragment"><div class="line"><span class="comment">// PROTOTYPE (class LocalTimeSchedule)</span></div>
<div class="line"><a class="code hl_class" href="class_local_time_schedule.html">LocalTimeSchedule</a> &amp;withHourOfDay(<span class="keywordtype">int</span> hourMultiple, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a> timeRange = <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>());</div>
</div><!-- fragment --><ul>
<li>Hour multiples are relative to the day, so you typically want to use a value that 24 is evenly divisible by (2, 3, 4, 6, 8, 12).</li>
<li>The <code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> can restrict this to certain hours of the day, and certain days of the week. It can also handle exception dates, both only on date, or to exclude dates.</li>
<li>The hour of the start of the time range specifies the offset relative to the day to start the increment from (modulo the increment)</li>
<li>The minute and second of the start of the time range specifies the minute and second offset</li>
</ul>
<p >For example, every 2 hours (00:00, 02:00, 04:00) local time.</p>
<div class="fragment"><div class="line">schedule.withHourOfDay(2);</div>
</div><!-- fragment --><p >Every 2 hours, but starting at 01:30 local time (01:30, 03:30, 05:03, ...).</p>
<div class="fragment"><div class="line">schedule.withHourOfDay(2, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;01:30:00&quot;</span>), <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;23:59:59&quot;</span>)));</div>
</div><!-- fragment --><p >Every 15 minutes between 9:00 AM and 5:00 PM local time, otherwise every 2 hours (00:00, 02:00, 04:00 local time)</p>
<div class="fragment"><div class="line">schedule.withMinuteOfHour(15, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;09:00:00&quot;</span>), <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;16:59:59&quot;</span>)));</div>
<div class="line">schedule.withHourOfDay(2);</div>
</div><!-- fragment --><p >If configuring by JSON:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Key   </th><th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadLeft">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"hd"   </td><td class="markdownTableBodyLeft">integer   </td><td class="markdownTableBodyLeft">Hour of day multiple   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">"f"   </td><td class="markdownTableBodyLeft">integer   </td><td class="markdownTableBodyLeft">Flag bits (optional)   </td><td class="markdownTableBodyLeft">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"s"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">The start time (HH:MM:SS format, can omit MM or SS)   </td><td class="markdownTableBodyLeft">"00:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">"e"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">The end time (HH:MM:SS format, can omit MM or SS)   </td><td class="markdownTableBodyLeft">"23:59:59"   </td></tr>
</table>
<p>| "y" | integer | Mask value for days of the week (optional) | | "a" | Array of string | Array of strings of the form YYYY-MM-DD to allow specific dates (optional) | | "x" | Array of string | Array of strings of the form YYYY-MM-DD to exclude specific dates (optional) |</p>
<h3>Day of week of the month</h3>
<p >This is used for things like: "Every first Monday of the month," "Every second Tuesday of the month," or "Last Friday of the month."</p>
<div class="fragment"><div class="line"><span class="comment">// PROTOTYPE (class LocalTimeSchedule)</span></div>
<div class="line"><a class="code hl_class" href="class_local_time_schedule.html">LocalTimeSchedule</a> &amp;withDayOfWeekOfMonth(<span class="keywordtype">int</span> dayOfWeek, <span class="keywordtype">int</span> instance, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a> timeRange = <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>());</div>
</div><!-- fragment --><ul>
<li>The dayOfWeek specifies the day of the week (Sunday = 0, Monday = 1, Tuesday = 2, ..., Saturday = 6).</li>
<li>The instance specifies which instance (1 = first, 2 = second, ... Or -1 = last, -2 = second to last, ...)</li>
<li>The <code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> can restrict this to certain hours of the day, and certain days of the week. It can also handle exception dates, both only on date, or to exclude dates.</li>
<li>The start of the time range specifies the hour, minute, and second (local time)</li>
<li>Use a time of day with day of week restriction instead if you want to do "Every Monday"</li>
</ul>
<p >First Saturday of the month at midnight local time:</p>
<div class="fragment"><div class="line">schedule.withDayOfWeekOfMonth(LocalTimeDayOfWeek::DAY_SATURDAY, 1);</div>
</div><!-- fragment --><p >First Monday of the month at 9:00 AM local time:</p>
<div class="fragment"><div class="line">schedule.withDayOfWeekOfMonth(LocalTimeDayOfWeek::DAY_MONDAY, 1, <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;09:00:00&quot;</span>));</div>
</div><!-- fragment --><p >Last Friday of the month at 5 PM local time.</p>
<div class="fragment"><div class="line">schedule.withDayOfWeekOfMonth(LocalTimeDayOfWeek::DAY_FRIDAY, -1, <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;17:00:00&quot;</span>));</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Key   </th><th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadLeft">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"dw"   </td><td class="markdownTableBodyLeft">integer   </td><td class="markdownTableBodyLeft">Day of week instance (1 = first, 2 = second, ..., or -1 = last, -2 = second to last, ...   </td><td class="markdownTableBodyLeft"></td></tr>
</table>
<p>| "d" | integer | Day of the week 0 = Sunday, 1 = Monday, ..., 6 = Saturday | | "f" | integer | Flag bits (optional) | 0 | | "s" | string | The start time (HH:MM:SS format, can omit MM or SS) | "00:00:00" | | "e" | string | The end time (HH:MM:SS format, can omit MM or SS) | "23:59:59" | | "y" | integer | Mask value for days of the week (optional) | | "a" | Array of string | Array of strings of the form YYYY-MM-DD to allow specific dates (optional) | | "x" | Array of string | Array of strings of the form YYYY-MM-DD to exclude specific dates (optional) |</p>
<h3>Day of month</h3>
<p >This is used for things like "The 1st of the month," "The 15th of the month," or "the last day of the month."</p>
<div class="fragment"><div class="line"><span class="comment">// PROTOTYPE (class LocalTimeSchedule)</span></div>
<div class="line"><a class="code hl_class" href="class_local_time_schedule.html">LocalTimeSchedule</a> &amp;withDayOfMonth(<span class="keywordtype">int</span> dayOfMonth, <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a> timeRange = <a class="code hl_class" href="class_local_time_range.html">LocalTimeRange</a>());</div>
</div><!-- fragment --><ul>
<li>The dayOfMonth specifies which instance (1 = 1st of the month, 2 = 2nd of the month, ... Or -1 = last day, -2 = second to last day, ...)</li>
<li>A <code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> can handle exception dates, both only on date, or to exclude dates.</li>
<li>The start of the time range specifies the hour, minute, and second (local time)</li>
</ul>
<p >For example, the 6th of the month at midnight:</p>
<div class="fragment"><div class="line">schedule.withDayOfMonth(6);</div>
</div><!-- fragment --><p >The 6th of the month at 6:00 AM local time:</p>
<div class="fragment"><div class="line">schedule.withDayOfMonth(6, <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;06:00&quot;</span>)); </div>
</div><!-- fragment --><p >The last day of the month at 11:59:59 PM:</p>
<div class="fragment"><div class="line">schedule.withDayOfMonth(-1, <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;23:59:59&quot;</span>)); </div>
</div><!-- fragment --><p >The second to last day of the month:</p>
<div class="fragment"><div class="line">schedule.withDayOfMonth(-2);</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Key   </th><th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadLeft">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"dw"   </td><td class="markdownTableBodyLeft">integer   </td><td class="markdownTableBodyLeft">Day of month instance (1 = 1st, 2 = 2nd, ... or -1 = last day of month, -2 = second to last, ...   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">"f"   </td><td class="markdownTableBodyLeft">integer   </td><td class="markdownTableBodyLeft">Flag bits (optional)   </td><td class="markdownTableBodyLeft">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"s"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">The start time (HH:MM:SS format, can omit MM or SS)   </td><td class="markdownTableBodyLeft">"00:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">"e"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">The end time (HH:MM:SS format, can omit MM or SS)   </td><td class="markdownTableBodyLeft">"23:59:59"   </td></tr>
</table>
<p>| "y" | integer | Mask value for days of the week (optional) | | "a" | Array of string | Array of strings of the form YYYY-MM-DD to allow specific dates (optional) | | "x" | Array of string | Array of strings of the form YYYY-MM-DD to exclude specific dates (optional) |</p>
<h3>Time schedule</h3>
<p >It's also possible to schedule at a specific time in local time. You can specify zero or more <code><a class="el" href="class_local_time_h_m_s_restricted.html" title="HMS values, but only on specific days of week or dates (with optional exceptions)">LocalTimeHMSRestricted</a></code> objects, limited by available RAM.</p>
<p >The <code><a class="el" href="class_local_time_h_m_s_restricted.html" title="HMS values, but only on specific days of week or dates (with optional exceptions)">LocalTimeHMSRestricted</a></code> is itself composed of a <code><a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a></code> object, for hours minutes and seconds, and a <code><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a></code> which can optionally restrict which dates the times re used.</p>
<p >Some ways you can use times:</p>
<ul>
<li>"At 17:00:00" every day (local time)</li>
<li>"At 17:00:00, Monday - Friday"</li>
<li>"At 09:00:00, Monday - Friday, except for 2022-03-21"</li>
<li>"At 23:59:59 on 2022-03-31"</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// PROTOTYPE (class LocalTimeSchedule)</span></div>
<div class="line"><a class="code hl_class" href="class_local_time_schedule.html">LocalTimeSchedule</a> &amp;withTime(<a class="code hl_class" href="class_local_time_h_m_s_restricted.html">LocalTimeHMSRestricted</a> hms);</div>
<div class="line"><a class="code hl_class" href="class_local_time_schedule.html">LocalTimeSchedule</a> &amp;withTimes(std::initializer_list&lt;LocalTimeHMSRestricted&gt; timesParam);</div>
<div class="ttc" id="aclass_local_time_h_m_s_restricted_html"><div class="ttname"><a href="class_local_time_h_m_s_restricted.html">LocalTimeHMSRestricted</a></div><div class="ttdoc">HMS values, but only on specific days of week or dates (with optional exceptions)</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:890</div></div>
</div><!-- fragment --><p >At 4:00 AM local time, every day:</p>
<div class="fragment"><div class="line">schedule.withTime(<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;04:00&quot;</span>));</div>
</div><!-- fragment --><p >At 06:00 and 18:30 (4:30 PM) local time, every day. Note the {} surrounding a list of times.</p>
<div class="fragment"><div class="line">schedule.withTimes({<a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;06:00&quot;</span>), <a class="code hl_class" href="class_local_time_h_m_s.html">LocalTimeHMS</a>(<span class="stringliteral">&quot;18:30&quot;</span>)});</div>
</div><!-- fragment --><p >At 4:00 AM on weekdays:</p>
<div class="fragment"><div class="line">schedule.withTime(<a class="code hl_class" href="class_local_time_h_m_s_restricted.html">LocalTimeHMSRestricted</a>(<span class="stringliteral">&quot;04:00&quot;</span>, <a class="code hl_class" href="class_local_time_restricted_date.html">LocalTimeRestrictedDate</a>(<a class="code hl_variable" href="class_local_time_day_of_week.html#af61f2d3564336024fd93d174c09ab225">LocalTimeDayOfWeek::MASK_WEEKDAY</a>))); </div>
</div><!-- fragment --><p >At midnight (local time) on Saturdays:</p>
<div class="fragment"><div class="line">schedule.withTime(<a class="code hl_class" href="class_local_time_h_m_s_restricted.html">LocalTimeHMSRestricted</a>(<span class="stringliteral">&quot;00:00&quot;</span>, <a class="code hl_class" href="class_local_time_restricted_date.html">LocalTimeRestrictedDate</a>(<a class="code hl_variable" href="class_local_time_day_of_week.html#a8445e58c729f66c87e785fabf0a9a02c">LocalTimeDayOfWeek::MASK_SATURDAY</a>))); </div>
<div class="ttc" id="aclass_local_time_day_of_week_html_a8445e58c729f66c87e785fabf0a9a02c"><div class="ttname"><a href="class_local_time_day_of_week.html#a8445e58c729f66c87e785fabf0a9a02c">LocalTimeDayOfWeek::MASK_SATURDAY</a></div><div class="ttdeci">static const uint8_t MASK_SATURDAY</div><div class="ttdoc">Mask value for Saturday.</div><div class="ttdef"><b>Definition:</b> LocalTimeRK.h:410</div></div>
</div><!-- fragment --><p >If configuring by JSON:</p>
<p >| Key | Type | Description | Default | | :&mdash; | :&mdash; | :&mdash; | :&mdash; | | "tm" | string | Time in "HH:MM:SS" format, 24 hour clock, local time | | "f" | integer | Flag bits (optional) | 0 | | "y" | number | Mask value for days of the week (optional) | | "a" | Array of string | Array of strings of the form YYYY-MM-DD to allow specific dates (optional) | | "x" | Array of string | Array of strings of the form YYYY-MM-DD to exclude specific dates (optional) |</p>
<h3>All methods</h3>
<p >&lt;details&gt;</p>
<p >A complete time schedule.</p>
<p >A time schedule consists of minute multiples ("every 15 minutes"), optionally within a time range (all day, or from 09:00:00 to 17:00:00 local time, for example.</p>
<p >It can also have hour multiples, optionally in a time range, at a defined minute ("every 4 hours at :15 
past the hour").</p>
<p >Schedules can be at a specifc day week, with an ordinal (first Monday, last Friday) at a specific time, optionally with exceptions.</p>
<p >Schedules can be a specific day of the month (the 1st, the 5th of the month, the last day of the month, the second to last day of month).</p>
<p >It can also have any number of specific times in the day ("at 08:17:30 local time, 18:15:20 local time") every day, specific days of the week, on specific dates, or with date exceptions.</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#a0f3e02eb918ae5b0a583c9d589fdb211" title="Adds a minute multiple schedule in a time range.">LocalTimeSchedule::withMinuteOfHour(int increment, LocalTimeRange timeRange)</a></h3>
<p >Adds a minute multiple schedule in a time range.</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withMinuteOfHour(int increment, LocalTimeRange timeRange)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>increment</code> Number of minutes (must be 1 &lt;= minutes &lt;= 59). A value that is is divisible by is recommended.</li>
<li><code>timeRange</code> When to apply this minute multiple and/or minute offset (optional)</li>
</ul>
<p >This schedule publishes every n minutes within the hour. This really is every hour, not rolling, so you should use a value that 60 is divisible by (2, 3, 4, 5, 6, 10, 12, 15, 20, 30) otherwise there will be an inconsistent period at the top of the hour.</p>
<p >If you specify a time range that does not start at 00:00:00 you can customize which minute the schedule starts at. For example: <code>15, <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a>(<a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>("00:05:00"), <a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>("23:59:59")</code> will schedule every 15 minutes, but starting at 5 minutes past the hour, so 05:00, 20:00, 35:00, 50:00.</p>
<p >The largest value for hmsEnd of the time range is 23:59:59.</p>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#a7170b4c44b7231b0e7ac62a76ddc2bd6" title="Adds multiple times periodically in a time range with an hour increment.">LocalTimeSchedule::withHourOfDay(int hourMultiple, LocalTimeRange timeRange)</a></h3>
<p >Adds multiple times periodically in a time range with an hour increment.</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withHourOfDay(int hourMultiple, LocalTimeRange timeRange)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>hourMultiple</code> Hours between items must be &gt;= 1. For example: 2 = every other hour.</li>
<li><code>timeRange</code> Time range to add items to. This is optional; if not specified then the entire day. Also is used to specify a minute offset.</li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<p >Hours are per day, local time. For whole-day schedules, you will typically use a value that 24 is evenly divisible by (2, 3, 4, 6, 8, 12), because otherwise the time periods will brief unequal at midnight.</p>
<p >Also note that times are local, and take into account daylight saving. Thus during a time switch, the interval may end up being a different number of hours than specified. For example, if the times would have been 00:00 and 04:00, a hourMultiple of 4, and you do this over a spring forward, the actual number hours between 00:00 and 04:00 is 5 (at least in the US where DST starts at 2:00).</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#a8009b3e69e7d9f4c5f4f9f1720bdcad0" title="Schedule an item on a specific instance of a day of week of the month.">LocalTimeSchedule::withDayOfWeekOfMonth(int dayOfWeek, int instance, LocalTimeRange timeRange)</a></h3>
<p >Schedule an item on a specific instance of a day of week of the month.</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withDayOfWeekOfMonth(int dayOfWeek, int instance, LocalTimeRange timeRange)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>dayOfWeek</code> Day of week 0 = Sunday, 1 = Monday, ..., 6 = Saturday</li>
<li><code>instance</code> 1 = first week, 2 = second week, ..., -1 = last week, -2 = 2nd to last week</li>
<li><code>timeRange</code> Optional to restrict dates or to set a time for the item</li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#a65b94428538e5d7e2a76478b346d26da" title="Schedule an item on a specific day of the month.">LocalTimeSchedule::withDayOfMonth(int dayOfMonth, LocalTimeRange timeRange)</a></h3>
<p >Schedule an item on a specific day of the month.</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withDayOfMonth(int dayOfMonth, LocalTimeRange timeRange)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>dayOfMonth</code> 1 = 1st, 2 = 2nd of the month, ..., -1 = last day of the month, -2 = second to last day of the month, ...</li>
<li><code>timeRange</code> Optional to restrict dates or to set a time for the item</li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#a7bde73278b84115839a38308edb393f4" title="Add a scheduled item at a time in local time during the day.">LocalTimeSchedule::withTime(LocalTimeHMSRestricted hms)</a></h3>
<p >Add a scheduled item at a time in local time during the day.</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withTime(LocalTimeHMSRestricted hms)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>hms</code> The time in local time 00:00:00 to 23:59:59, optionally with date restrictions</li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<p >You can call this multiple times, and also combine it with minute multiple schedules.</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#a48fe453480a6fbcae734fd34a285dee6" title="Add multiple scheduled items at a time in local time during the day.">LocalTimeSchedule::withTimes(std::initializer_list&lt; LocalTimeHMSRestricted &gt; timesParam)</a></h3>
<p >Add multiple scheduled items at a time in local time during the day.</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withTimes(std::initializer_list&lt; LocalTimeHMSRestricted &gt; timesParam)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>timesParam</code> an auto-initialized list of <a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a> objects</li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<p >You can call this multiple times, and also combine it with minute multiple schedules.</p>
<p >schedule.withTimes({<a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>("06:00"), <a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>("18:30")});</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#acdb2b4d1052b77e7c43fb6ecce23c598" title="Sets the name of this schedule (optional)">LocalTimeSchedule::withName(const char * name)</a></h3>
<p >Sets the name of this schedule (optional)</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withName(const char * name)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>name</code></li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<hr  />
<h3><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a> &amp; <a class="el" href="class_local_time_schedule.html#a336d2c9b841e2be8569cd2d8a955db1d" title="Sets the flags for this schedule (optional)">LocalTimeSchedule::withFlags(uint32_t flags)</a></h3>
<p >Sets the flags for this schedule (optional)</p>
<div class="fragment"><div class="line">LocalTimeSchedule &amp; withFlags(uint32_t flags)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>flags</code></li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a>&amp;</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_schedule.html#a8bff350b430ffe92b871710dc6e5ccdf" title="Returns true if the schedule does not have any items in it.">LocalTimeSchedule::isEmpty() const</a></h3>
<p >Returns true if the schedule does not have any items in it.</p>
<div class="fragment"><div class="line">bool isEmpty() const</div>
</div><!-- fragment --><h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>void <a class="el" href="class_local_time_schedule.html#a6197185cae91a1f8254cb6ae0cabd90c" title="Clear the existing settings.">LocalTimeSchedule::clear()</a></h3>
<p >Clear the existing settings.</p>
<div class="fragment"><div class="line">void clear()</div>
</div><!-- fragment --><hr  />
<h3>void <a class="el" href="class_local_time_schedule.html#a22690d024e5195152be052ab218ee107" title="Set the schedule from a JSON string containing an array of objects.">LocalTimeSchedule::fromJson(const char * jsonStr)</a></h3>
<p >Set the schedule from a JSON string containing an array of objects.</p>
<div class="fragment"><div class="line">void fromJson(const char * jsonStr)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>jsonStr</code></li>
</ul>
<p >See the overload that takes a JSONValue if the JSON string has already been parsed.</p>
<hr  />
<h3>void <a class="el" href="class_local_time_schedule.html#aaf6bb85e98570cd286021fed42351a3d" title="Set the schedule of this object from a JSONValue, typically the outer object.">LocalTimeSchedule::fromJson(JSONValue jsonArray)</a></h3>
<p >Set the schedule of this object from a JSONValue, typically the outer object.</p>
<div class="fragment"><div class="line">void fromJson(JSONValue jsonArray)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>jsonArray</code> A JSONValue containing an array of objects</li>
</ul>
<p >Array of <a class="el" href="class_local_time_schedule_item.html" title="A single item in a schedule, such as minute of hour, hour of day, or a specific time.">LocalTimeScheduleItem</a> objects:</p>
<ul>
<li>mh (integer): Minute of hour (takes place of setting m and i separately)</li>
<li>hd (integer): Hour of day (takes place of setting m and i separately)</li>
<li>dw (integer): Day of week (takes place of setting m and i separately)</li>
<li>dm (integer): Day of month (takes place of setting m and i separately)</li>
<li>tm (string) Time string in HH:MM:SS format (can omit MM and SS parts, see <a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>) for TIME items</li>
<li>m (integer) type of multiple (optional if mm, )</li>
<li>i (integer) increment</li>
<li>f (integer) flag bits (optional)</li>
<li>s (string) The start time (HH:MM:SS format, can omit MM or SS) [from <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a> via <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a>]</li>
<li>e (string) The end time (HH:MM:SS format, can omit MM or SS) [from <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a> via <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a>]</li>
<li>y (integer) mask value for onlyOnDays [from <a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> via <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a>]</li>
<li>a (array) Array of YYYY-MM-DD value strings to allow [from <a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> via <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a>]</li>
<li>x (array) Array of YYYY-MM-DD values to exclude [from <a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> via <a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a>]</li>
</ul>
<hr  />
<h3>bool <a class="el" href="class_local_time_schedule.html#a32f70da470e822c2ca3a74f59e10b059" title="Update the conv object to point at the next schedule item.">LocalTimeSchedule::getNextScheduledTime(LocalTimeConvert &amp; conv) const</a></h3>
<p >Update the conv object to point at the next schedule item.</p>
<div class="fragment"><div class="line">bool getNextScheduledTime(LocalTimeConvert &amp; conv) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>conv</code> <a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a> object, may be modified</li>
</ul>
<h4>Returns</h4>
<p >true if there is an item available or false if not. if false, conv will be unchanged.</p>
<p >This method finds closest scheduled time for this objecvt, if it's in the near future. The <a class="el" href="class_local_time.html#a37be620abc0478abb5379c02e00470b1" title="Get the global singleton instance of this class.">LocalTime::instance()</a>.getScheduleLookaheadDays() setting determines how far in the future to check; the default is 3 days. The way schedules work each day needs to be checked to make sure all of the constraints are met, so long look-aheads are computationally intensive. This is not normally an issue, because the idea is that you'll wake from sleep or check the schedule at least every few days, at which point the new schedule may be available.</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_schedule.html#a9c5fa2bc212b563fac3e25f931467cbc" title="Update the conv object to point at the next schedule item.">LocalTimeSchedule::getNextScheduledTime(LocalTimeConvert &amp; conv, std::function&lt; bool(LocalTimeScheduleItem &amp;item)&gt; filter) const</a></h3>
<p >Update the conv object to point at the next schedule item.</p>
<div class="fragment"><div class="line">bool getNextScheduledTime(LocalTimeConvert &amp; conv, std::function&lt; bool(LocalTimeScheduleItem &amp;item)&gt; filter) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>conv</code> <a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a> object, may be modified</li>
<li><code>filter</code> A function to determine, for each schedule item, if it should be tested</li>
</ul>
<h4>Returns</h4>
<p >true if there is an item available or false if not. if false, conv will be unchanged.</p>
<p >This method finds closest scheduled time for this objecvt, if it's in the near future. The <a class="el" href="class_local_time.html#a37be620abc0478abb5379c02e00470b1" title="Get the global singleton instance of this class.">LocalTime::instance()</a>.getScheduleLookaheadDays() setting determines how far in the future to check; the default is 3 days. The way schedules work each day needs to be checked to make sure all of the constraints are met, so long look-aheads are computationally intensive. This is not normally an issue, because the idea is that you'll wake from sleep or check the schedule at least every few days, at which point the new schedule may be available.</p>
<p >The filter function or lambda has this prototype:</p>
<p >bool filterCallback(LocalTimeScheduleItem &amp;item)</p>
<p >If should return true to check this item, or false to skip this item for schedule checking.</p>
<p >&lt;/details&gt;</p>
<h2><a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a></h2>
<p >This object holds a hour, minute, and second value (HMS). There are numerous methods to compare time values, and convert the values to other formats.</p>
<p >When converting from string format always use 24-hour clock format; this object does not support AM/PM. Also when converting from strings you can omit the seconds, or even both the minutes and seconds.</p>
<p >Note that hour 24 is never a valid value. Because HMS calculations are always inclusive, the end of the day is 23:59:59. Leap seconds are not supported by the underlying C standard time library.</p>
<p >&lt;details&gt;</p>
<h3><a class="el" href="class_local_time_h_m_s.html#aae1947a2f64a25ebdab3fd4870b98843" title="Default constructor. Sets time to 00:00:00.">LocalTimeHMS::LocalTimeHMS()</a></h3>
<p >Default constructor. Sets time to 00:00:00.</p>
<div class="fragment"><div class="line">LocalTimeHMS()</div>
</div><!-- fragment --><hr  />
<h3><a class="el" href="class_local_time_h_m_s.html#a0d432f4dde905e80ff3bfb16cfe8c9cf" title="Destructor.">LocalTimeHMS::~LocalTimeHMS()</a></h3>
<p >Destructor.</p>
<div class="fragment"><div class="line">virtual  ~LocalTimeHMS()</div>
</div><!-- fragment --><hr  />
<h3><a class="el" href="class_local_time_h_m_s.html#a8c70104cf5f1404a3219889661478090" title="Constructs the object from a time string.">LocalTimeHMS::LocalTimeHMS(const char * str)</a></h3>
<p >Constructs the object from a time string.</p>
<div class="fragment"><div class="line">LocalTimeHMS(const char * str)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>str</code> The time string</li>
</ul>
<p >The time string is normally of the form HH:MM:SS, such as "04:00:00" for 4:00 AM. The hour is in 24-hour format. Other formats are supported as well, including omitting the seconds (04:00), or including only the hour "04", or omitting the leadings zeros (4:0:0).</p>
<p >Additionally, the hour could be negative, used in UTC DST offsets. The minute and second are always positive (0-59). The hour could also be &gt; 24 when used as a timezone offset.</p>
<hr  />
<h3><a class="el" href="class_local_time_h_m_s.html#a85a1773998bef17ba80ace57c1ea12fa" title="Construct this HMS from a LocalTimeValue (which contains YMD and HMS)">LocalTimeHMS::LocalTimeHMS(const LocalTimeValue &amp; value)</a></h3>
<p >Construct this HMS from a <a class="el" href="class_local_time_value.html" title="Container for a local time value with accessors similar to the Wiring Time class.">LocalTimeValue</a> (which contains YMD and HMS)</p>
<div class="fragment"><div class="line">LocalTimeHMS(const LocalTimeValue &amp; value)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>value</code></li>
</ul>
<hr  />
<h3>void <a class="el" href="class_local_time_h_m_s.html#aecfb5486936114e06176287f5f9818c6" title="Sets the hour, minute, and second to 0.">LocalTimeHMS::clear()</a></h3>
<p >Sets the hour, minute, and second to 0.</p>
<div class="fragment"><div class="line">void clear()</div>
</div><!-- fragment --><hr  />
<h3>void <a class="el" href="class_local_time_h_m_s.html#a09357a93ce14e2a78599c6c51365bda7" title="Parse a &quot;H:MM:SS&quot; string.">LocalTimeHMS::parse(const char * str)</a></h3>
<p >Parse a "H:MM:SS" string.</p>
<div class="fragment"><div class="line">void parse(const char * str)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>str</code> Input string</li>
</ul>
<p >Multiple formats are supported, and parts are optional:</p>
<ul>
<li>H:MM:SS (examples: "2:00:00" or "2:0:0")</li>
<li>H:MM (examples: "2:00" or "2:0")</li>
<li>H (examples: "2")</li>
</ul>
<p >Hours are always 0 - 23 (24-hour clock). Can also be a negative hour -1 to -23.</p>
<hr  />
<h3>String <a class="el" href="class_local_time_h_m_s.html#a325a825e6d99e25fcd1eca709935a6e9" title="Turns the parsed data into a normalized string of the form: &quot;HH:MM:SS&quot; (24-hour clock,...">LocalTimeHMS::toString() const</a></h3>
<p >Turns the parsed data into a normalized string of the form: "HH:MM:SS" (24-hour clock, with leading zeroes)</p>
<div class="fragment"><div class="line">String toString() const</div>
</div><!-- fragment --><hr  />
<h3>int <a class="el" href="class_local_time_h_m_s.html#aebae99c1b2c6154ee4e2aa0a012b946e" title="Convert hour minute second into a number of seconds (simple multiplication and addition)">LocalTimeHMS::toSeconds() const</a></h3>
<p >Convert hour minute second into a number of seconds (simple multiplication and addition)</p>
<div class="fragment"><div class="line">int toSeconds() const</div>
</div><!-- fragment --><hr  />
<h3>void <a class="el" href="class_local_time_h_m_s.html#af092e9cd92de2c68ff43944384147683" title="Sets the hour, minute, and second fields from a struct tm.">LocalTimeHMS::fromTimeInfo(const struct tm * pTimeInfo)</a></h3>
<p >Sets the hour, minute, and second fields from a struct tm.</p>
<div class="fragment"><div class="line">void fromTimeInfo(const struct tm * pTimeInfo)</div>
</div><!-- fragment --><hr  />
<h3>void <a class="el" href="class_local_time_h_m_s.html#a923ca6256cbaa7aa9b66b6049f866611" title="Sets the HMS from a LocalTimeValue.">LocalTimeHMS::fromLocalTimeValue(const LocalTimeValue &amp; value)</a></h3>
<p >Sets the HMS from a <a class="el" href="class_local_time_value.html" title="Container for a local time value with accessors similar to the Wiring Time class.">LocalTimeValue</a>.</p>
<div class="fragment"><div class="line">void fromLocalTimeValue(const LocalTimeValue &amp; value)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>value</code></li>
</ul>
<hr  />
<h3>void <a class="el" href="class_local_time_h_m_s.html#a1bff8e5946f5dbb7236a3e0f27846a9f" title="Fill in the tm_hour, tm_min, and tm_sec fields of a struct tm from the values in this object.">LocalTimeHMS::toTimeInfo(struct tm * pTimeInfo) const</a></h3>
<p >Fill in the tm_hour, tm_min, and tm_sec fields of a struct tm from the values in this object.</p>
<div class="fragment"><div class="line">void toTimeInfo(struct tm * pTimeInfo) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>pTimeInfo</code> The struct tm to modify</li>
</ul>
<hr  />
<h3>void <a class="el" href="class_local_time_h_m_s.html#a31be71d84b7184f30dd69b7df5be5f3c" title="Adjust the values in a struct tm from the values in this object.">LocalTimeHMS::adjustTimeInfo(struct tm * pTimeInfo) const</a></h3>
<p >Adjust the values in a struct tm from the values in this object.</p>
<div class="fragment"><div class="line">void adjustTimeInfo(struct tm * pTimeInfo) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>pTimeInfo</code> The struct tm to modify</li>
</ul>
<p >After calling this, the values in the struct tm may be out of range, for example tm_hour &gt; 23. This is fine, as calling mktime/gmtime normalizes this case and carries out-of-range values into the other fields as necessary.</p>
<hr  />
<h3>void <a class="el" href="class_local_time_h_m_s.html#a1870536b6f5609aac489447a492244c3" title="Parses a JSON value of type string in HH:MM:SS format.">LocalTimeHMS::fromJson(JSONValue jsonObj)</a></h3>
<p >Parses a JSON value of type string in HH:MM:SS format.</p>
<div class="fragment"><div class="line">void fromJson(JSONValue jsonObj)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>jsonObj</code></li>
</ul>
<hr  />
<h3><a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a> &amp; <a class="el" href="class_local_time_h_m_s.html#a0ea4f9cee93e97e230d667bd828a5859" title="Sets this object to be the specified hour, with minute and second set to 0.">LocalTimeHMS::withHour(int hour)</a></h3>
<p >Sets this object to be the specified hour, with minute and second set to 0.</p>
<div class="fragment"><div class="line">LocalTimeHMS &amp; withHour(int hour)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>hour</code> 0 &lt;= hour &lt; 24</li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>&amp;</p>
<hr  />
<h3><a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a> &amp; <a class="el" href="class_local_time_h_m_s.html#a4a5bc06fced90400e37662c1c9581026" title="Sets this object to be the specified hour and minute, with second set to 0.">LocalTimeHMS::withHourMinute(int hour, int minute)</a></h3>
<p >Sets this object to be the specified hour and minute, with second set to 0.</p>
<div class="fragment"><div class="line">LocalTimeHMS &amp; withHourMinute(int hour, int minute)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>hour</code> 0 &lt;= hour &lt; 24</li>
<li><code>minute</code> 0 &lt;= minute &lt; 60</li>
</ul>
<h4>Returns</h4>
<p ><a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>&amp;</p>
<hr  />
<h3>int <a class="el" href="class_local_time_h_m_s.html#a8c59077a86a9111184d52ece17fce422" title="Compare two LocalTimeHMS objects.">LocalTimeHMS::compareTo(const LocalTimeHMS &amp; other) const</a></h3>
<p >Compare two <a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a> objects.</p>
<div class="fragment"><div class="line">int compareTo(const LocalTimeHMS &amp; other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code> The item to compare to</li>
</ul>
<h4>Returns</h4>
<p >int -1 if this item is &lt; other; 0 if this = other, or +1 if this &gt; other</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_h_m_s.html#a6e4872fb3d62d9398dc46f0704ee2602" title="Returns true if this item is equal to other. Compares hour, minute, and second.">LocalTimeHMS::operator==(const LocalTimeHMS &amp; other) const</a></h3>
<p >Returns true if this item is equal to other. Compares hour, minute, and second.</p>
<div class="fragment"><div class="line">bool operator==(const LocalTimeHMS &amp; other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_h_m_s.html#a66f0840e4b074a0f5a3242bafac92427" title="Returns true if this item is not equal to other.">LocalTimeHMS::operator!=(const LocalTimeHMS &amp; other) const</a></h3>
<p >Returns true if this item is not equal to other.</p>
<div class="fragment"><div class="line">bool operator!=(const LocalTimeHMS &amp; other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_h_m_s.html#a72c687582d251be2a3c5480e3e3a1c1a" title="Returns true if this item is &lt; other.">LocalTimeHMS::operator&lt;(const LocalTimeHMS &amp; other) const</a></h3>
<p >Returns true if this item is &lt; other.</p>
<div class="fragment"><div class="line">bool operator&lt;(const LocalTimeHMS &amp; other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_h_m_s.html#a43d66330fd210c132c55afe4d40a4e41" title="Returns true if this item is &gt; other.">LocalTimeHMS::operator&gt;(const LocalTimeHMS &amp; other) const</a></h3>
<p >Returns true if this item is &gt; other.</p>
<div class="fragment"><div class="line">bool operator&gt;(const LocalTimeHMS &amp; other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_h_m_s.html#a3c0a28b69d1c9f9075d0c89388babad2" title="Returns true if this item &lt;= other.">LocalTimeHMS::operator&lt;=(const LocalTimeHMS &amp; other) const</a></h3>
<p >Returns true if this item &lt;= other.</p>
<div class="fragment"><div class="line">bool operator&lt;=(const LocalTimeHMS &amp; other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_h_m_s.html#a04005d4f6e353d2043613cbd3620e584" title="Returns true if this item is &gt;= other.">LocalTimeHMS::operator&gt;=(const LocalTimeHMS &amp; other) const</a></h3>
<p >Returns true if this item is &gt;= other.</p>
<div class="fragment"><div class="line">bool operator&gt;=(const LocalTimeHMS &amp; other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<p >&lt;/details&gt;</p>
<h2><a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a></h2>
<p >This object specifies a year, month, and day. There are numerous methods to compare time values, and convert the values to other formats.</p>
<p >When converting from a string this must always be "YYYY-MM-DD" format, with dashes, and in that order. Other date formats including common but poorly defined United States date formats cannot be used!</p>
<p >&lt;details&gt;</p>
<p >Class for holding a year month day efficiently (4 bytes of storage)</p>
<p >There is no method to get this object from a time_t because time_t is at UTC and this object is intended to be the YMD at local time to correspond with a <a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a>. Thus it requires a <a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a> object, and there is a method to get a <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> from a <a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a>, not from this object.</p>
<h3><a class="el" href="class_local_time_y_m_d.html#a4b33eff6df475af3e86d13f2ecca84f3" title="Default contructor with an invalid date (0000-00-00) set.">LocalTimeYMD::LocalTimeYMD()</a></h3>
<p >Default contructor with an invalid date (0000-00-00) set.</p>
<div class="fragment"><div class="line">LocalTimeYMD()</div>
</div><!-- fragment --><hr  />
<h3><a class="el" href="class_local_time_y_m_d.html#a2748b6abb6a73812d08d4ec33e58cb4f" title="Construct a YMD value from a string.">LocalTimeYMD::LocalTimeYMD(const char * s)</a></h3>
<p >Construct a YMD value from a string.</p>
<div class="fragment"><div class="line">LocalTimeYMD(const char * s)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>s</code> String, must be in YYYY-MM-DD format. No other formars are allowed!</li>
</ul>
<hr  />
<h3><a class="el" href="class_local_time_y_m_d.html#a3a7ef686f882b241440b83f05e7c55b0" title="Construct from a LocalTimeValue object.">LocalTimeYMD::LocalTimeYMD(const LocalTimeValue &amp; value)</a></h3>
<p >Construct from a <a class="el" href="class_local_time_value.html" title="Container for a local time value with accessors similar to the Wiring Time class.">LocalTimeValue</a> object.</p>
<div class="fragment"><div class="line">LocalTimeYMD(const LocalTimeValue &amp; value)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>value</code> The date to copy from</li>
</ul>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#ac41a2fa5d455bb2bcd4ac58e2336fbe3" title="Returns true if the date is uninitialized, as from the default constructor.">LocalTimeYMD::isEmpty() const</a></h3>
<p >Returns true if the date is uninitialized, as from the default constructor.</p>
<div class="fragment"><div class="line">bool isEmpty() const</div>
</div><!-- fragment --><h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>int <a class="el" href="class_local_time_y_m_d.html#a064b510c5726dfaee1af60fcd057e8d4" title="Get the year as a 4-digit year, for example: 2022.">LocalTimeYMD::getYear() const</a></h3>
<p >Get the year as a 4-digit year, for example: 2022.</p>
<div class="fragment"><div class="line">int getYear() const</div>
</div><!-- fragment --><h4>Returns</h4>
<p >int The year, 4-digit</p>
<hr  />
<h3>void <a class="el" href="class_local_time_y_m_d.html#a29055aa7c7c978dbbc573e138b4bf7b1" title="Set the year value.">LocalTimeYMD::setYear(int year)</a></h3>
<p >Set the year value.</p>
<div class="fragment"><div class="line">void setYear(int year)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>year</code> Year to set, can be several different values but typically is 4-digit year (2022, for example)</li>
</ul>
<hr  />
<h3>int <a class="el" href="class_local_time_y_m_d.html#ad5951ad26b690a453ee4cfce6b41c287" title="Get the month, 1 - 12 inclusive.">LocalTimeYMD::getMonth() const</a></h3>
<p >Get the month, 1 - 12 inclusive.</p>
<div class="fragment"><div class="line">int getMonth() const</div>
</div><!-- fragment --><h4>Returns</h4>
<p >int month</p>
<hr  />
<h3>void <a class="el" href="class_local_time_y_m_d.html#a9a241b5279a9ef902d254fc9e7118603" title="Set the month, 1 - 12 inclusive.">LocalTimeYMD::setMonth(int month)</a></h3>
<p >Set the month, 1 - 12 inclusive.</p>
<div class="fragment"><div class="line">void setMonth(int month)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>month</code> Month value</li>
</ul>
<hr  />
<h3>int <a class="el" href="class_local_time_y_m_d.html#a54b72635337bce6aee088717c7d3789a" title="Get the day of month, starting a 1.">LocalTimeYMD::getDay() const</a></h3>
<p >Get the day of month, starting a 1.</p>
<div class="fragment"><div class="line">int getDay() const</div>
</div><!-- fragment --><h4>Returns</h4>
<p >int</p>
<hr  />
<h3>void <a class="el" href="class_local_time_y_m_d.html#a6310b87921e6a1ca9392a882c67eb475" title="Set the day of the month, staring at 1.">LocalTimeYMD::setDay(int day)</a></h3>
<p >Set the day of the month, staring at 1.</p>
<div class="fragment"><div class="line">void setDay(int day)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>day</code></li>
</ul>
<p >This method does not validate the date value, but you should avoid setting invalid date values since the results can be unpredictable.</p>
<hr  />
<h3>void <a class="el" href="class_local_time_y_m_d.html#a8c81d591a713c28000ff4a179e96f657" title="Copies the year, month, and day from a struct tm.">LocalTimeYMD::fromTimeInfo(const struct tm * pTimeInfo)</a></h3>
<p >Copies the year, month, and day from a struct tm.</p>
<div class="fragment"><div class="line">void fromTimeInfo(const struct tm * pTimeInfo)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>pTimeInfo</code> The pointer to a struct tm to copy the year, month, and day from.</li>
</ul>
<p >The tm should be in local time.</p>
<hr  />
<h3>void <a class="el" href="class_local_time_y_m_d.html#a17452873f35e9cae3700d241a93b8c31" title="The LocalTimeValue to copy the year, month and day from.">LocalTimeYMD::fromLocalTimeValue(const LocalTimeValue &amp; value)</a></h3>
<p >The <a class="el" href="class_local_time_value.html" title="Container for a local time value with accessors similar to the Wiring Time class.">LocalTimeValue</a> to copy the year, month and day from.</p>
<div class="fragment"><div class="line">void fromLocalTimeValue(const LocalTimeValue &amp; value)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>value</code> Source of the year, month, and day values</li>
</ul>
<p >Since <a class="el" href="class_local_time_value.html" title="Container for a local time value with accessors similar to the Wiring Time class.">LocalTimeValue</a> contains a struct tm, this uses fromTimeInfo internally.</p>
<hr  />
<h3>void <a class="el" href="class_local_time_y_m_d.html#aac36c31908686b386e9198b28408b528" title="Add a number of days to the current YMD (updating month or year as necessary)">LocalTimeYMD::addDay(int numberOfDays)</a></h3>
<p >Add a number of days to the current YMD (updating month or year as necessary)</p>
<div class="fragment"><div class="line">void addDay(int numberOfDays)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>numberOfDays</code> Number of days to add (positive) or subtract (negative)</li>
</ul>
<p >Works correctly with leap years.</p>
<hr  />
<h3>int <a class="el" href="class_local_time_y_m_d.html#a69ffe73663af806e57e9ae496ce26c7c" title="Get the day of the week, 0 = Sunday, 1 = Monday, 2 = Tuesday, ..., 6 = Saturday.">LocalTimeYMD::getDayOfWeek() const</a></h3>
<p >Get the day of the week, 0 = Sunday, 1 = Monday, 2 = Tuesday, ..., 6 = Saturday.</p>
<div class="fragment"><div class="line">int getDayOfWeek() const</div>
</div><!-- fragment --><h4>Returns</h4>
<p >int the day of the week</p>
<hr  />
<h3>int <a class="el" href="class_local_time_y_m_d.html#a734d105df9a0acbeb3df9177d9ed4fac" title="Compare to another LocalTimeYMD object.">LocalTimeYMD::compareTo(const LocalTimeYMD other) const</a></h3>
<p >Compare to another <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> object.</p>
<div class="fragment"><div class="line">int compareTo(const LocalTimeYMD other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >int -1 if this is &lt; other, 0 if this == other, or 1 if this &gt; other.</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#afcb847d4baea8d3c51e1bf070c057034" title="Tests if this LocalTimeYMD is equal to other.">LocalTimeYMD::operator==(const LocalTimeYMD other) const</a></h3>
<p >Tests if this <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> is equal to other.</p>
<div class="fragment"><div class="line">bool operator==(const LocalTimeYMD other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#a93556a4d3123a79b365716a977b9618c" title="Tests if this LocalTimeYMD is not equal to other.">LocalTimeYMD::operator!=(const LocalTimeYMD other) const</a></h3>
<p >Tests if this <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> is not equal to other.</p>
<div class="fragment"><div class="line">bool operator!=(const LocalTimeYMD other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#a4613a64f0e5451d212a16e0cf606d100" title="Tests if this LocalTimeYMD is less than other.">LocalTimeYMD::operator&lt;(const LocalTimeYMD other) const</a></h3>
<p >Tests if this <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> is less than other.</p>
<div class="fragment"><div class="line">bool operator&lt;(const LocalTimeYMD other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#a7ecef70ad515ce037cadfcce798f093f" title="Tests if this LocalTimeYMD is less than or equal to other.">LocalTimeYMD::operator&lt;=(const LocalTimeYMD other) const</a></h3>
<p >Tests if this <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> is less than or equal to other.</p>
<div class="fragment"><div class="line">bool operator&lt;=(const LocalTimeYMD other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#a45254ccc72e15a85f132f1ca7e7395ae" title="Tests if this LocalTimeYMD is greater than other.">LocalTimeYMD::operator&gt;(const LocalTimeYMD other) const</a></h3>
<p >Tests if this <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> is greater than other.</p>
<div class="fragment"><div class="line">bool operator&gt;(const LocalTimeYMD other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#a2c84228e00ba0cda6ba00d9c623fbb41" title="Tests if this LocalTimeYMD is greater than or equal to other.">LocalTimeYMD::operator&gt;=(const LocalTimeYMD other) const</a></h3>
<p >Tests if this <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> is greater than or equal to other.</p>
<div class="fragment"><div class="line">bool operator&gt;=(const LocalTimeYMD other) const</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>other</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<hr  />
<h3>bool <a class="el" href="class_local_time_y_m_d.html#a7d031b677727455b1ae094f412b9f05b" title="Parse a YMD string in the format &quot;YYYY-MD-DD&quot;. Only this format is supported!">LocalTimeYMD::parse(const char * s)</a></h3>
<p >Parse a YMD string in the format "YYYY-MD-DD". Only this format is supported!</p>
<div class="fragment"><div class="line">bool parse(const char * s)</div>
</div><!-- fragment --><h4>Parameters</h4>
<ul>
<li><code>s</code></li>
</ul>
<h4>Returns</h4>
<p >true</p>
<h4>Returns</h4>
<p >false</p>
<p >Do not use this function with other date formats like "mm/dd/yyyy"!</p>
<hr  />
<h3>String <a class="el" href="class_local_time_y_m_d.html#a5c16912bac04af3333af48fa0da7258f" title="Converts the value to YYYY-MM-DD format as a String with leading zeros.">LocalTimeYMD::toString() const</a></h3>
<p >Converts the value to YYYY-MM-DD format as a String with leading zeros.</p>
<div class="fragment"><div class="line">String toString() const</div>
</div><!-- fragment --><h4>Returns</h4>
<p >String</p>
<h1>struct <a class="el" href="struct_local_time_y_m_d_1_1_y_m_d.html" title="Packed structure to hold the YMD value.">LocalTimeYMD::YMD</a></h1>
<p >Packed structure to hold the YMD value.</p>
<p >&lt;/details&gt;</p>
<h3><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></h3>
<p >A <code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> is a start time and end time in local time, expressed as <code><a class="el" href="class_local_time_h_m_s.html" title="Container for holding an hour minute second time value.">LocalTimeHMS</a></code> objects (hours, minutes, seconds).</p>
<p >Time ranges are inclusive, so the entire day is 00:00:00 to 23:59:59.</p>
<p >The default constructor for <code><a class="el" href="class_local_time_range.html" title="Class to hold a time range in local time in HH:MM:SS format.">LocalTimeRange</a></code> sets the time range to the entire day.</p>
<p >When converting from JSON:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Key   </th><th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadLeft">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"s"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">Starting time in "HH:MM:SS" format, 24 hour clock, local time   </td><td class="markdownTableBodyLeft">"00:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">"e"   </td><td class="markdownTableBodyLeft">string   </td><td class="markdownTableBodyLeft">Ending time in "HH:MM:SS" format, 24 hour clock, local time   </td><td class="markdownTableBodyLeft">"23:59:59"   </td></tr>
</table>
<p >&lt;details&gt;</p>
<h4><a class="el" href="class_local_time_range.html#a549f18d3f7594fa99f2832751bb8bdc7" title="Construct a new Time Range object with the range of the entire day (inclusive)">LocalTimeRange::LocalTimeRange()</a></h4>
<p >Construct a new Time Range object with the range of the entire day (inclusive)</p>
<div class="fragment"><div class="line">LocalTimeRange()</div>
</div><!-- fragment --><p >This is start = 00:00:00, end = 23:59:59. The system clock does not have a concept of leap seconds.</p>
<hr  />
<h4><a class="el" href="class_local_time_range.html#add498a3441118ce11d7dcf5a11248147" title="Construct a new Time Range object with the specifies start and end times.">LocalTimeRange::LocalTimeRange(LocalTimeHMS hmsStart, LocalTimeHMS hmsEnd)</a></h4>
<p >Construct a new Time Range object with the specifies start and end times.</p>
<div class="fragment"><div class="line">LocalTimeRange(LocalTimeHMS hmsStart, LocalTimeHMS hmsEnd)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>hmsStart</code> Start time in local time 00:00:00 &lt;= hmsStart &lt;= 23:59:59</li>
<li><code>hmsEnd</code> End time in local time 00:00:00 &lt;= hmsStart &lt;= 23:59:59 (optional)</li>
</ul>
<p >Note that 24:00:00 is not a valid time. You should generally use inclusive times such that 23:59:59 is the end of the day.</p>
<hr  />
<h4><a class="el" href="class_local_time_range.html#a80707e0e54b96fa3f11a80326dfe6b79" title="Construct a new object that specifies start time, end time, and date restrictions.">LocalTimeRange::LocalTimeRange(LocalTimeHMS hmsStart, LocalTimeHMS hmsEnd, LocalTimeRestrictedDate dateRestriction)</a></h4>
<p >Construct a new object that specifies start time, end time, and date restrictions.</p>
<div class="fragment"><div class="line">LocalTimeRange(LocalTimeHMS hmsStart, LocalTimeHMS hmsEnd, LocalTimeRestrictedDate dateRestriction)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>hmsStart</code> Start time in local time 00:00:00 &lt;= hmsStart &lt;= 23:59:59</li>
<li><code>hmsEnd</code> End time in local time 00:00:00 &lt;= hmsStart &lt;= 23:59:59</li>
<li><code>dateRestriction</code> Only use this time range on certain dates</li>
</ul>
<hr  />
<h4>void <a class="el" href="class_local_time_range.html#a7839680a919a19a0ea5f482e76633770" title="Clear time range to all day, every day.">LocalTimeRange::clear()</a></h4>
<p >Clear time range to all day, every day.</p>
<div class="fragment"><div class="line">void clear()</div>
</div><!-- fragment --><hr  />
<h4>time_t <a class="el" href="class_local_time_range.html#a046d461962c4a06f07b795c9dd95281e" title="Get the number of seconds between start and end based on a LocalTimeConvert object.">LocalTimeRange::getTimeSpan(const LocalTimeConvert &amp; conv) const</a></h4>
<p >Get the number of seconds between start and end based on a <a class="el" href="class_local_time_convert.html" title="Perform time conversions. This is the main class you will need.">LocalTimeConvert</a> object.</p>
<div class="fragment"><div class="line">time_t getTimeSpan(const LocalTimeConvert &amp; conv) const</div>
</div><!-- fragment --><p >The reason for the conv object is that it contains the time to calculate at, as well as the daylight saving time settings. This methods takes into account the actual number of seconds including when a time change is crossed.</p>
<h5>Parameters</h5>
<ul>
<li><code>conv</code> The time and timezone settings to calculate the time span at</li>
</ul>
<h5>Returns</h5>
<p >time_t Time difference in seconds</p>
<p >In the weird case that start &gt; end, it can return a negative value, as time_t is a signed long (or long long) value.</p>
<p >This does not take into account date restrictions!</p>
<hr  />
<h4>int <a class="el" href="class_local_time_range.html#ab8502ab5009275d9f295f6f48266ab11" title="Compares a time (LocalTimeHHS, local time) to this time range.">LocalTimeRange::compareTo(LocalTimeHMS hms) const</a></h4>
<p >Compares a time (LocalTimeHHS, local time) to this time range.</p>
<div class="fragment"><div class="line">int compareTo(LocalTimeHMS hms) const</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>hms</code></li>
</ul>
<h5>Returns</h5>
<p >int -1 if hms is before hmsStart, 0 if in range, +1 if hms is after hmsEnd</p>
<hr  />
<h4>bool <a class="el" href="class_local_time_range.html#a8bd876d85c61e2293b37e4382b08bdc8" title="Returns true if the date restrictions allow this day.">LocalTimeRange::isValidDate(LocalTimeYMD ymd) const</a></h4>
<p >Returns true if the date restrictions allow this day.</p>
<div class="fragment"><div class="line">bool isValidDate(LocalTimeYMD ymd) const</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>ymd</code></li>
</ul>
<h5>Returns</h5>
<p >true</p>
<h5>Returns</h5>
<p >false</p>
<hr  />
<h4>bool <a class="el" href="class_local_time_range.html#a516772f0d8392b5c9462c1899f54f524" title="Returns true if the date restrictions allow this date and the time is in this range (inclusive)">LocalTimeRange::inRange(LocalTimeValue localTimeValue) const</a></h4>
<p >Returns true if the date restrictions allow this date and the time is in this range (inclusive)</p>
<div class="fragment"><div class="line">bool inRange(LocalTimeValue localTimeValue) const</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>localTimeValue</code></li>
</ul>
<h5>Returns</h5>
<p >true</p>
<h5>Returns</h5>
<p >false</p>
<hr  />
<h4>void <a class="el" href="class_local_time_range.html#a89210c8a30ca5b7eb3e47c307dde1a47" title="Set the date restrictions from a LocalTimeHMSRestricted object.">LocalTimeRange::fromTime(LocalTimeHMSRestricted hms)</a></h4>
<p >Set the date restrictions from a <a class="el" href="class_local_time_h_m_s_restricted.html" title="HMS values, but only on specific days of week or dates (with optional exceptions)">LocalTimeHMSRestricted</a> object.</p>
<div class="fragment"><div class="line">void fromTime(LocalTimeHMSRestricted hms)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>hms</code> <a class="el" href="class_local_time_h_m_s_restricted.html" title="HMS values, but only on specific days of week or dates (with optional exceptions)">LocalTimeHMSRestricted</a>, really only uses the date restrictions, not the HMS part</li>
</ul>
<hr  />
<h4>void <a class="el" href="class_local_time_range.html#a592c5be087a3d90cb1568237906e063d" title="Fills in the time range from a JSON object.">LocalTimeRange::fromJson(JSONValue jsonObj)</a></h4>
<p >Fills in the time range from a JSON object.</p>
<div class="fragment"><div class="line">void fromJson(JSONValue jsonObj)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>jsonObj</code></li>
</ul>
<p >Keys:</p>
<ul>
<li>s (string) The start time (HH:MM:SS format, can omit MM or SS)</li>
<li>e (string) The end time (HH:MM:SS format, can omit MM or SS)</li>
</ul>
<p >&lt;/details&gt;</p>
<h5><a class="el" href="class_local_time_day_of_week.html" title="Class for managing a mask value of zero or more days of the week.">LocalTimeDayOfWeek</a></h5>
<p >A <code><a class="el" href="class_local_time_day_of_week.html" title="Class for managing a mask value of zero or more days of the week.">LocalTimeDayOfWeek</a></code> specifies zero or more days of the week (Sunday, Monday, ...)</p>
<p >Common mask values:</p>
<p >| Value Hex | Value Decimal | Constant | Description | | :&mdash; | &mdash;: | :&mdash; | | 0x01 | 1 | MASK_SUNDAY | Sunday | | 0x02 | 2 | MASK_MONDAY | Monday | | 0x04 | 4 | MASK_TUESDAY | Tuesday | | 0x08 | 8 | MASK_WEDNESDAY | Wednesday | | 0x10 | 16 | MASK_THURSDAY | Thursday | | 0x20 | 32 | MASK_FRIDAY | Friday | | 0x40 | 64 | MASK_SATURDAY | Saturday | | 0x7f | 127 | MASK_ALL | Every day | | 0x3e | 62 | MASK_WEEKDAY | Weekdays (Monday - Friday) | | 0x41 | 65 | MASK_WEEKEND | Weekends (Saturday - Sunday) |</p>
<p >Note that you can combine any mask bits. For example, Monday, Wednesday, Friday is 2 + 8 + 32 = 42,</p>
<p >In JSON, you can only use the numeric mask values, as a decimal number. For example, weekdays Monday - Friday is 62.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Key   </th><th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">"y"   </td><td class="markdownTableBodyLeft">number   </td><td class="markdownTableBodyLeft">Mask value for days of the week, see table above   </td></tr>
</table>
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a></h4>
<p >A <code><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a></code> is used for both multiples and times (below). It can have:</p>
<ul>
<li>A day of week selection (<code><a class="el" href="class_local_time_day_of_week.html" title="Class for managing a mask value of zero or more days of the week.">LocalTimeDayOfWeek</a></code>), which is a bitmask of days to allow. This makes it easy to specify, for example, weekdays (Monday - Friday).</li>
<li>A list of dates to allow (vector of <code><a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a></code>)</li>
<li>A list of dates to exclude (vector of <code><a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a></code>)</li>
</ul>
<p >| Key | Type | Description | Default | | :&mdash; | :&mdash; | :&mdash; | :&mdash; | | "y" | number | Mask value for days of the week, see table above (optional) | | "a" | Array of string | Array of strings of the form YYYY-MM-DD to allow specific dates (optional) | | "x" | Array of string | Array of strings of the form YYYY-MM-DD to exclude specific dates (optional) |</p>
<p >&lt;details&gt;</p>
<h4><a class="el" href="class_local_time_restricted_date.html#a337bb0015b6cd26506b9884d1c3c4f0b" title="Create a date restricted object restricted to days of the week.">LocalTimeRestrictedDate::LocalTimeRestrictedDate(uint8_t mask)</a></h4>
<p >Create a date restricted object restricted to days of the week.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate(uint8_t mask)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>mask</code> The days of the week to enable. Pass <a class="el" href="class_local_time_day_of_week.html#a1ae26d2e584d02e67ec951ff193e87a5" title="Mask value for every day of the week 0x7f = 127.">LocalTimeDayOfWeek::MASK_ALL</a> to allow on every day (no restrictions)</li>
</ul>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html#aa01c495ecd7290ded2a797172cb5f340" title="Construct an object with an initializer list of strings.">LocalTimeRestrictedDate::LocalTimeRestrictedDate(uint8_t mask, std::initializer_list&lt; const char * &gt; onlyOnDates, std::initializer_list&lt; const char * &gt; exceptDates)</a></h4>
<p >Construct an object with an initializer list of strings.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate(uint8_t mask, std::initializer_list&lt; const char * &gt; onlyOnDates, std::initializer_list&lt; const char * &gt; exceptDates)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>mask</code> mask value, see <a class="el" href="class_local_time_day_of_week.html" title="Class for managing a mask value of zero or more days of the week.">LocalTimeDayOfWeek</a> for values</li>
<li><code>onlyOnDates</code> Initializer list of strings of the form YYYY-MM-DD</li>
<li><code>exceptDates</code> Initializer list of strings of the form YYYY-MM-DD</li>
</ul>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html#a19e09b6ebabe28b9f0d465496dcaaac4" title="Construct an object with an initializer list of LocalTimeYMD objects.">LocalTimeRestrictedDate::LocalTimeRestrictedDate(uint8_t mask, std::initializer_list&lt; LocalTimeYMD &gt; onlyOnDates, std::initializer_list&lt; LocalTimeYMD &gt; exceptDates)</a></h4>
<p >Construct an object with an initializer list of <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> objects.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate(uint8_t mask, std::initializer_list&lt; LocalTimeYMD &gt; onlyOnDates, std::initializer_list&lt; LocalTimeYMD &gt; exceptDates)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>mask</code> mask value, see <a class="el" href="class_local_time_day_of_week.html" title="Class for managing a mask value of zero or more days of the week.">LocalTimeDayOfWeek</a> for values</li>
<li><code>onlyOnDates</code> Initializer list of <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> values</li>
<li><code>exceptDates</code> Initializer list of <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> values</li>
</ul>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> &amp; <a class="el" href="class_local_time_restricted_date.html#ae02da60d2708268a121fa809a1e15528" title="Set the mask value to MASK_ALL. Does not change only on date or except on date lists.">LocalTimeRestrictedDate::withOnAllDays()</a></h4>
<p >Set the mask value to MASK_ALL. Does not change only on date or except on date lists.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate &amp; withOnAllDays()</div>
</div><!-- fragment --><h5>Returns</h5>
<p ><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a>&amp;</p>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> &amp; <a class="el" href="class_local_time_restricted_date.html#a45f4617eb05446b341175ec9e8c2e474" title="Restrict to days of the week.">LocalTimeRestrictedDate::withOnlyOnDays(LocalTimeDayOfWeek value)</a></h4>
<p >Restrict to days of the week.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate &amp; withOnlyOnDays(LocalTimeDayOfWeek value)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>value</code> A <a class="el" href="class_local_time_day_of_week.html" title="Class for managing a mask value of zero or more days of the week.">LocalTimeDayOfWeek</a> object specifying the days of the week (mask bits for Sunday - Saturday)</li>
</ul>
<h5>Returns</h5>
<p ><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a>&amp;</p>
<p >A day of the week is allowed if the day of week mask bit is set. If a date is in the except dates list, then isValid return false. If a date is in the only on days mask OR only on dates list, then isValid will return true.</p>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> &amp; <a class="el" href="class_local_time_restricted_date.html#ade9defb4b9ec4cb555f7b4483cdba2ac" title="Restrict to certain dates.">LocalTimeRestrictedDate::withOnlyOnDays(uint8_t mask)</a></h4>
<p >Restrict to certain dates.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate &amp; withOnlyOnDays(uint8_t mask)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>mask</code> Mask value, such as <a class="el" href="class_local_time_day_of_week.html#a11371665dc835f68c2ffb7547521e418" title="Mask value for Monday.">LocalTimeDayOfWeek::MASK_MONDAY</a></li>
</ul>
<h5>Returns</h5>
<p ><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a>&amp;</p>
<p >A day of the week is allowed if the day of week mask bit is set. If a date is in the except dates list, then isValid return false. If a date is in the only on days mask OR only on dates list, then isValid will return true.</p>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> &amp; <a class="el" href="class_local_time_restricted_date.html#a31a65d67dd48a52a4b9c557c5b1bee0d" title="Restrict to certain dates.">LocalTimeRestrictedDate::withOnlyOnDates(std::initializer_list&lt; const char * &gt; dates)</a></h4>
<p >Restrict to certain dates.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate &amp; withOnlyOnDates(std::initializer_list&lt; const char * &gt; dates)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>dates</code> A {} list of strings of the form YYYY-MM-DD. No other date formats are allowed!</li>
</ul>
<h5>Returns</h5>
<p ><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a>&amp;</p>
<p >If a date is in the except dates list, then isValid return false. If a date is in the only on days mask OR only on dates list, then isValid will return true.</p>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> &amp; <a class="el" href="class_local_time_restricted_date.html#aa2bbacbbe3a41d956ba522486e278f08" title="Restrict to certain dates.">LocalTimeRestrictedDate::withOnlyOnDates(std::initializer_list&lt; LocalTimeYMD &gt; dates)</a></h4>
<p >Restrict to certain dates.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate &amp; withOnlyOnDates(std::initializer_list&lt; LocalTimeYMD &gt; dates)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>dates</code> A {} list of <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> objects</li>
</ul>
<h5>Returns</h5>
<p ><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a>&amp;</p>
<p >If a date is in the except dates list, then isValid return false. If a date is in the only on days mask OR only on dates list, then isValid will return true.</p>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> &amp; <a class="el" href="class_local_time_restricted_date.html#aff623822dea89caf0874828875326c2a" title="Dates that will always return false for isValid.">LocalTimeRestrictedDate::withExceptDates(std::initializer_list&lt; const char * &gt; dates)</a></h4>
<p >Dates that will always return false for isValid.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate &amp; withExceptDates(std::initializer_list&lt; const char * &gt; dates)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>dates</code> A {} list of strings of the form YYYY-MM-DD. No other date formats are allowed!</li>
</ul>
<h5>Returns</h5>
<p ><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a>&amp;</p>
<p >If a date is in the except dates list, then isValid return false. If a date is in the only on days mask OR only on dates list, then isValid will return true.</p>
<hr  />
<h4><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a> &amp; <a class="el" href="class_local_time_restricted_date.html#ad2f546f5d172a9d4272f67ec7117bffd" title="Dates that will always return false for isValid.">LocalTimeRestrictedDate::withExceptDates(std::initializer_list&lt; LocalTimeYMD &gt; dates)</a></h4>
<p >Dates that will always return false for isValid.</p>
<div class="fragment"><div class="line">LocalTimeRestrictedDate &amp; withExceptDates(std::initializer_list&lt; LocalTimeYMD &gt; dates)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>dates</code> A {} list of <a class="el" href="class_local_time_y_m_d.html" title="Class for holding a year month day efficiently (4 bytes of storage)">LocalTimeYMD</a> objects</li>
</ul>
<h5>Returns</h5>
<p ><a class="el" href="class_local_time_restricted_date.html" title="Day of week, date, or date exception restrictions.">LocalTimeRestrictedDate</a>&amp;</p>
<p >If a date is in the except dates list, then isValid return false. If a date is in the only on days mask OR only on dates list, then isValid will return true.</p>
<hr  />
<h4>bool <a class="el" href="class_local_time_restricted_date.html#aa58e174e83cca24b3af2cd4b060c7416" title="Returns true if onlyOnDays mask is 0 and the onlyOnDates and exceptDates lists are empty.">LocalTimeRestrictedDate::isEmpty() const</a></h4>
<p >Returns true if onlyOnDays mask is 0 and the onlyOnDates and exceptDates lists are empty.</p>
<div class="fragment"><div class="line">bool isEmpty() const</div>
</div><!-- fragment --><h5>Returns</h5>
<p >true</p>
<h5>Returns</h5>
<p >false</p>
<hr  />
<h4>void <a class="el" href="class_local_time_restricted_date.html#a812462c0dabf80088473befdc3be0873" title="Clear all settings.">LocalTimeRestrictedDate::clear()</a></h4>
<p >Clear all settings.</p>
<div class="fragment"><div class="line">void clear()</div>
</div><!-- fragment --><hr  />
<h4>bool <a class="el" href="class_local_time_restricted_date.html#a64c7b5bfa57cb755e209ab18ab324e38" title="Returns true if a date is in the onlyOnDays or onlyOnDates list, and not in the exceptDates list.">LocalTimeRestrictedDate::isValid(LocalTimeValue localTimeValue) const</a></h4>
<p >Returns true if a date is in the onlyOnDays or onlyOnDates list, and not in the exceptDates list.</p>
<div class="fragment"><div class="line">bool isValid(LocalTimeValue localTimeValue) const</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>localTimeValue</code> Date to check (local time)</li>
</ul>
<h5>Returns</h5>
<p >true</p>
<h5>Returns</h5>
<p >false</p>
<hr  />
<h4>bool <a class="el" href="class_local_time_restricted_date.html#a4656b5df3355df37ee58f4d890e9d3c9" title="Returns true if a date is in the onlyOnDays or onlyOnDates list, and not in the exceptDates list.">LocalTimeRestrictedDate::isValid(LocalTimeYMD ymd) const</a></h4>
<p >Returns true if a date is in the onlyOnDays or onlyOnDates list, and not in the exceptDates list.</p>
<div class="fragment"><div class="line">bool isValid(LocalTimeYMD ymd) const</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>ymd</code> Date to check (local time)</li>
</ul>
<h5>Returns</h5>
<p >true</p>
<h5>Returns</h5>
<p >false</p>
<hr  />
<h4>bool <a class="el" href="class_local_time_restricted_date.html#a55320569e24fc812097ea222c7755fcf" title="Returns true of a date is in the onlyOnDates list.">LocalTimeRestrictedDate::inOnlyOnDates(LocalTimeYMD ymd) const</a></h4>
<p >Returns true of a date is in the onlyOnDates list.</p>
<div class="fragment"><div class="line">bool inOnlyOnDates(LocalTimeYMD ymd) const</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>ymd</code></li>
</ul>
<h5>Returns</h5>
<p >true</p>
<h5>Returns</h5>
<p >false</p>
<hr  />
<h4>bool <a class="el" href="class_local_time_restricted_date.html#a90c155e90d0f5c7dbcd50568a86066d3" title="Returns true of a date is in the exceptDates list.">LocalTimeRestrictedDate::inExceptDates(LocalTimeYMD ymd) const</a></h4>
<p >Returns true of a date is in the exceptDates list.</p>
<div class="fragment"><div class="line">bool inExceptDates(LocalTimeYMD ymd) const</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>ymd</code></li>
</ul>
<h5>Returns</h5>
<p >true</p>
<h5>Returns</h5>
<p >false</p>
<hr  />
<h4>void <a class="el" href="class_local_time_restricted_date.html#a1b98bbc34b09ed3c948872ef5b885f06" title="Fills in this object from JSON data.">LocalTimeRestrictedDate::fromJson(JSONValue jsonObj)</a></h4>
<p >Fills in this object from JSON data.</p>
<div class="fragment"><div class="line">void fromJson(JSONValue jsonObj)</div>
</div><!-- fragment --><h5>Parameters</h5>
<ul>
<li><code>jsonObj</code></li>
</ul>
<p >Keys:</p>
<ul>
<li>y (integer) mask value for onlyOnDays (optional)</li>
<li>a (array) Array of YYYY-MM-DD value strings to allow (optional)</li>
<li>x (array) Array of YYYY-MM-DD values to exclude (optional)</li>
</ul>
<h1>class <a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a></h1>
<p >A complete time schedule.</p>
<p >A time schedule consists of minute multiples ("every 15 minutes"), optionally within a time range (all day, or from 09:00:00 to 17:00:00 local time, for example.</p>
<p >It can also have hour multiples, optionally in a time range, at a defined minute ("every 4 hours at :15 
past the hour").</p>
<p >Schedules can be at a specifc day week, with an ordinal (first Monday, last Friday) at a specific time, optionally with exceptions.</p>
<p >Schedules can be a specific day of the month (the 1st, the 5th of the month, the last day of the month, the second to last day of month).</p>
<p >It can also have any number of specific times in the day ("at 08:17:30 local time, 18:15:20 local time") every day, specific days of the week, on specific dates, or with date exceptions.</p>
<p >&lt;/details&gt;</p>
<hr  />
<h2>Version history</h2>
<h3>0.0.8 (2022-03-22)</h3>
<ul>
<li>Added advanced scheduling modes (JSON scheduling)</li>
</ul>
<h3>0.0.7 (2022-03-08)</h3>
<ul>
<li>Added inLocalTimeRange and nextTimeList functions</li>
<li>Added <a class="el" href="class_local_time_schedule.html" title="A complete time schedule.">LocalTimeSchedule</a></li>
</ul>
<h3>0.0.6 (2022-03-08)</h3>
<ul>
<li>Added nextMinuteMultiple() and nextTime() functions</li>
</ul>
<h3>0.0.5 (2021-07-08)</h3>
<ul>
<li>Fixed bug in calculation of negative hour offsets that also included minutes</li>
<li>Added unit test for Adelaide, Australia</li>
</ul>
<h3>0.0.4 (2021-06-26)</h3>
<ul>
<li>Added nextDayOrTimeChange</li>
</ul>
<h3>0.0.3 (2021-06-11)</h3>
<ul>
<li>Remove more-examples code from library</li>
</ul>
<h3>0.0.2 (2021-06-07)</h3>
<ul>
<li>Add examples</li>
</ul>
<h3>0.0.1 (2021-06-06)</h3>
<ul>
<li>Initial version </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
